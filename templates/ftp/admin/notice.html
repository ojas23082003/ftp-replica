{% extends 'ftp/admin_base.html' %}
{% load staticfiles %}
{% block title %}Admin |Notice Board | FTP | International Relations Cell{% endblock %}
{% block css %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/dropdown.min.css" type="text/css">

    <style>
        .pdet{
            margin-top: 25px;
        }
        .bookmarked{
            color: #171b2e !important;
        }
        .button {
            border-radius-right: 24px;

            border: none;
            color: rgb(0,0,0);
            text-align: center;
            font-size: 28px;
            padding: 10px;
            width: 200px;
            transition: all 0.5s;
            cursor: pointer;

        }

        .button span {
            cursor: pointer;
            display: inline-block;
            position: relative;
            transition: 0.5s;
        }

        .button span:after {
            content: '\00bb';
            position: absolute;
            opacity: 0;
            top: 0;
            right: -20px;
            transition: 0.5s;
        }

        .button:hover span {
            padding-right: 25px;
            background-color: red;
        }

        .button:hover span:after {
            opacity: 1;
            right: 0;
        }

        .btn-success {
            color: #f89a30;
            background-color: #f8f9fc;
            border-color: #f8f9fc;
        }
        .btn-success:hover{
            background-color: #dde2f1 !important;
            border-color: white;
        }
        .animate-bottom {
            position: relative;
            -webkit-animation-name: animatebottom;
            -webkit-animation-duration: 1s;
            animation-name: animatebottom;
            animation-duration: 1s
        }
        @-webkit-keyframes animatebottom {
            from { bottom:-100px; opacity:0 }
            to { bottom:0px; opacity:1 }
        }

        @keyframes animatebottom {
            from{ bottom:-100px; opacity:0 }
            to{ bottom:0; opacity:1 }
        }

        .btn-lg, .btn-group-lg > .btn {
            padding: 0.5rem 0;
        }

        .applybutton {
            background-color: #f89a30 !important;
            color: white !important;
            transition: none !important;
            -webkit-appearance: none !important;
        }

        .applybutton:hover {
            background-color: #f89a30 !important;
        }

        .btn:active {
            outline: none !important;
        }

        .deadl {
            display: none;
        }

        @media (max-width: 767px) {
            .deadl {
                display: contents;
            }
        }

    </style>

    <meta name="viewport" content="width=device-width, initial-scale=1">

{% endblock %}

{% block content %}

    <div id="myDiv">

        <!-- Begin Page Content -->
        <div class="container-fluid">

            <!-- Content Row -->
            <div class="row">

                <!-- Content Column -->
                <div class="col-xl-12 my-4" style="text-align: center">

                    <h3 style="font-weight: bold; color: #242e5b;">Notice Board</h3>
                    {% for message in messages %}
                        <div class="alert {{ message.tags }} alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            {{ message }}
                        </div>
                    {% endfor %}
                    <div class="row justify-content-center">
                        <button class="btn btn-success m-2"><a href="{% url 'ftp:admin_notice_create' %}">Add new Notice</a></button>

                        {#<button class="btn btn-success m-2"><a href="{% url 'ftp:admin_projects_export' %}">Export</a></button>#}
                        {#<button class="btn btn-success m-2"><a href="{% url 'ftp:admin_projects_import' professor_id %}">Import from Professors</a></button>#}
{#                        <button type="button" class="btn btn-success m-2" data-toggle="modal" data-target="#createproj">Import from Professors</div>#}


                    {#                      <form class="form-inline" method="post" enctype="multipart/form-data">#}
                    {#                        {% csrf_token %}#}
                    {#                        <input type="file" name="myfile">#}
                    {#                        <button class="btn btn-success" type="submit">Import</button>#}
                    {#                      </form>#}

                </div>


                {% for p in notice %}

                    <div class="row" style="width: 95%; margin-left: 2.5%;">
                        <div class="col-xl-12 my-4">
                            <div class="card bg-primary text-black shadow">
                                <div class="btn-group">
{#                                    <button class="btn btn-success bookmark" id="book{{ p.0.id }}"><i class="#}
{#                                                {% if p.0.display %}#}
{#                                                    fas#}
{#                                                {% else %}#}
{#                                                    far#}
{#                                                {% endif %}#}
{#                                                 fa-circle" aria-hidden="true" id="i{{ p.0.id }}" style="color: #f89a30"></i></button>#}
                                    <button type="button" class="btn btn-light btn-lg btn-block" data-toggle="collapse" data-target="#c{{ p.id }}">
                                        <div class="card-body">
                                            <div class="container-fluid" style="padding-left: 0; padding-right: 0;">
                                                <div class="row">
                                                    <div class="col-md-4">{{p.heading}}</div>
                                                    <div class="col-md-4" style="font-style: italic;">{{p.date}}</div>
{#                                                    <div class="col-md-2"><span class="deadl">Deadline: </span>{{p.0.deadline}}</div>#}

                                                </div>
                                            </div>
                                            <div id="c{{ p.id }}" class="collapse">
                                                <hr>
                                                <h5 style="margin: 20px auto;">Notice Details </h5>

                                                <p>{{p.content|linebreaks}}</p>
                                                <br><br>

                                                <hr>


{#                                                <a type="button" class="btn btn-light btn-lg btn-block applybutton" data-toggle="modal" data-target="#Apps{{p.id}}" style="width: 80%; margin: auto;">#}
{#                                                    View Applications#}
{#                                                </a>#}



{#                                                <hr>#}

{##}
{#                                                <h5>Professor Link: <input type="text" class="form-control" value="https://ircell.iitkgp.ac.in/ftp/professors/{{p.0.id}}" id="myInput{{p.0.id}}" style="text-align: center;"></h5>#}
{#                                                <a type="button" class="btn btn-info applybutton copy" id="copy{{p.0.id}}" style="background-color:#36b9cc !important;">Copy Link</a>#}
{#                                                <div class="btn btn-success applybutton" data-toggle="modal" data-target="#myModal{{p.0.id}}">View</div>#}
{#                                                <a href="{% url 'ftp:admin_projects_edit' pk=p.0.id %}" class="btn btn-primary m-1">Edit</a>#}
{#                                                <a class="btn btn-danger m-1 delete" id="delt{{p.0.id}}" onclick="deleteproject()">Delete</a>#}
{#                                                <div class="btn btn-facebook m-1 Result" style="color: white" data-toggle="modal" data-target="#AddR{{p.0.id}}">Add result</div>#}

                                            </div>

                                        </div>
                                    </button>
{#                                    <a href="{% url 'ftp:admin_applied_list_export' pk=p.0.id %}" class="btn btn-info" style="vertical-align: middle !important;">Export All Applicants</a>#}

                                </div>
                            </div>
                        </div>
                    </div>

{#                    <div class="modal fade" id="myModal{{p.0.id}}">#}
{#                        <div class="modal-dialog modal-lg" >#}
{#                            <div class="modal-content">#}
{#                                <!-- Modal Header -->#}
{#                                <!--                    <div class="modal-header" style="text-align: center">-->#}
{#                                <!--                        <h3 class='col-12 modal-title text-center'><b>APPLY PROJECT</b></h3>-->#}
{#                                <!--                    </div>-->#}
{##}
{#                                <!-- Modal body -->#}
{#                                <div class="modal-body">#}
{#                                    <h3 style="font-weight: bold; margin-bottom: 15px;">{{p.0.project_name}}</h3>#}
{#                                    <h4 style="font-style: italic; font-size: 1.5rem; font-weight: bold; margin-bottom: 25px;">{{p.0.university}}</h4>#}
{#                                    <h4 style="color: red">Deadline: {{p.0.deadline}}</h4>#}
{#                                    <h4 style="font-weight: bold; margin-top: 20px;">Project Details</h4>#}
{#                                    <p>{{p.0.project_detail|linebreaks}}</p>#}
{#                                    <hr>#}
{#                                </div>#}
{##}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}

{#                    <div class="modal fade" id="Apps{{p.0.id}}">#}
{#                        <div class="modal-dialog modal-lg" >#}
{#                            <div class="modal-content">#}
{#                                <!-- Modal Header -->#}
{#                                <!--                    <div class="modal-header" style="text-align: center">-->#}
{#                                <!--                        <h3 class='col-12 modal-title text-center'><b>APPLY PROJECT</b></h3>-->#}
{#                                <!--                    </div>-->#}
{##}
{#                                <!-- Modal body -->#}
{#                                <div class="modal-body">#}
{#                                    {% for apps in p.1 %}#}
{#                                        <div class="row" style="width: 80%; height: 40px; background-color: #fffdd0; text-color: white; margin: auto; border-radius: 5px;">#}
{#                                            <div class="col-md-6" style="margin: auto;">#}
{#                                                {{apps.profile.fullname}}#}
{#                                            </div>#}
{#                                            <div class="col-md-6" style="margin: auto;">#}
{#                                                {{apps.profile.department}}#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <hr>#}
{#                                    {% endfor %}#}
{#                                </div>#}
{##}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}

{#                    <div class="modal" id="AddR{{p.0.id}}">#}
{#                        <div class="modal-dialog">#}
{#                            <div class="modal-content">#}
{##}
{#                                <!-- Modal Header -->#}
{#                                <div class="modal-header">#}
{#                                    <h4 class="modal-title">Add Result</h4>#}
{#                                    <button type="button" class="close" data-dismiss="modal">&times;</button>#}
{#                                </div>#}
{##}
{#                                <!-- Modal body -->#}
{#                                <div class="modal-body">#}
{#                                    #}
{#                                    <form action="{% url 'ftp:admin_Addresult' pk=p.0.id %}" method="POST">#}
{#                                        {% csrf_token %}#}
{#                                      <input type="text" name="idr" id="idr" value="{{ p.0.id }}" style="visibility: hidden">#}
{##}
{#                                        <label for="result">Add Result</label>#}
{#                                        <select name="result" class="ui fluid search dropdown" multiple="">#}
{#                                            <option value="">Name</option>#}
{##}
{#                                            {% for apps in p.1 %}#}
{#                                                <option value="{{apps.profile.rollno}}">{{apps.profile.fullname}}  -  {{apps.profile.rollno}}</option>#}
{#                                            {% endfor %}#}
{#                                        </select>#}
{##}
{#                                        <div style="text-align: center">#}
{#                                        <button type="submit" class="btn btn-primary AddResult" id="addr{{p.0.id}}" style="margin: auto;align-self: center;position: center;">ADD</button></div>#}
{#                                    </form>#}
{#                                </div>#}
{##}
{#                                <!-- Modal footer -->#}
{#                                <div class="modal-footer">#}
{#                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>#}
{#                                </div>#}
{##}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}


                {% endfor %}


{#                <div class="modal fade" id="createproj">#}
{#                    <div class="modal-dialog modal-lg" >#}
{#                        <div class="modal-content">#}
{#                            <!-- Modal Header -->#}
{#                            <!--                    <div class="modal-header" style="text-align: center">-->#}
{#                            <!--                        <h3 class='col-12 modal-title text-center'><b>APPLY PROJECT</b></h3>-->#}
{#                            <!--                    </div>-->#}
{##}
{#                            <!-- Modal body -->#}
{##}
{#                            <select id="prof">#}
{#                                {% for professors in allprofessors %}#}
{#                                    <option id="prof{{professors.id}}">{{professors.project_name}}</option>#}
{#                                {% endfor %}#}
{#                            </select>#}
{##}
{#                            <button class="btn btn-success" id="createproject">Import</button>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
            </div>
        </div>
    </div>
    <!-- /.container-fluid -->
    </div>

{% block js %}
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha256-t8GepnyPmw9t+foMh3mKNvcorqNHamSKtKRxxpUEgFI=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/dropdown.min.js" integrity="sha256-uEocYy6a0MpPLLHtYV7QAGdOeMRwE0Am2WtnOg/hBfM=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/search.min.js" integrity="sha256-gkqnhj5TvM/vwvHKAb4zBC7uL6mndcAlK6CEv5iEUwg=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha256-t8GepnyPmw9t+foMh3mKNvcorqNHamSKtKRxxpUEgFI=" crossorigin="anonymous"></script>

        <script type="text/javascript">
            $('.dropdown').dropdown({
                label: {
                    duration: 0,
                },
                debug: true,
                performance: true,
            });

            $('.ui.checkbox')
                .checkbox({
                    onChecked() {
                        const options = $('#members_dropdown > option').toArray().map(
                            (obj) => obj.value
                    );
                        $('#members_dropdown').dropdown('set exactly', options);
                    },
                    onUnchecked() {
                        $('#members_dropdown').dropdown('clear');
                    },
                });
        </script>
        <script>

            $('#createproject').click(function () {
                var prof = document.getElementById('prof');
                var id = $(prof).children(":selected").attr("id");
                var pid = id.slice(4,);
                $.ajax({
                    type: "GET",
                    url: "{% url 'ftp:admin_projects_import' %}",
                    data: {
                        'pid': pid,
                    },
                    dataType: 'json',
                    success: function (returndict) {
                        if (returndict.data.fb)
                        {
                            window.location.href = 'import/' + returndict.project;
                        }
                        else
                        {
                            alert('Project with that name already exists.');
                        }
                    }
                });
            });

            $('.bookmark').click(function () {
                var id = this.id;
                var pid = id.slice(4,);
                $.ajax({
                    type: "GET",
                    url: "{% url 'ftp:change_display' %}",
                    data: {
                        'pid': pid,
                    },
                    dataType: 'json',
                    success: function (data) {
                        if (data.fb) {
                            var ele = document.getElementById("i"+pid);
                            if (ele.classList.contains("far")) {
                                $("#i"+pid).removeClass("far");
                                $("#i"+pid).addClass("fas");
                            }
                            else {
                                $("#i"+pid).removeClass("fas");
                                $("#i"+pid).addClass("far");
                            }
                        }
                    }
                });
            });

            $('.copy').click(function(){
                var id = this.id;
                var pid = id.slice(4,);
                var copyText = document.getElementById("myInput"+pid);
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
                alert("Copied the text: " + copyText.value);
            });



            $('.delete').click(function () {
                var id = this.id;
                var pid = id.slice(4,);
                var r = confirm('Are you sure?');
                if (r == true)
                {
                    console.log('Deleted');
                    window.location.href = "delete/" + pid;
                }

            });

            $('.AddResult').click(function () {
                var id = this.id;

                var pid = id.slice(4,);

                console.log(pid);
            });
        </script>
        <script href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/dropdown.min.js"></script>
{% endblock %}

{% endblock %}