{% extends 'ftp/base_with_no_menu.html' %}
{% load static %}

{% block title %}Scholarships | FTP | International Relations Cell{% endblock %}

{% block header %}

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
    integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
    integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
    crossorigin="anonymous"></script>


{% endblock %}

{% block main %}
<style>
    #one {
        color: red;
    }

    #two {
        color: red;
    }

    #three {
        color: red;
    }
</style>
<link rel="stylesheet" href="{% static 'ftp/ProjectsPage/css/application.css' %}">
<main>
    <section>

        <div id="application" class="services-section section-padding30 fix" style="padding:60px;">
            <div style="background-color:#ece8e899 ; width: 94%; margin-left: 3% ; margin-top: 50px;">
                <!-- <div class="success" style="font-size: 25px;font-weight: 700;text-align: center;color: #ed293c;">
                    Applications are closed.
                </div> -->
                <form style="background-color:white ; margin-left:15px; margin-right: 15px;" name="myForm" id="myform"
                    onsubmit="validateForm(event)" method="POST" enctype="multipart/form-data"
                    action="{% url 'ftp:apply_scholarships_2k23' %}">
                    {% csrf_token %}

                    <div class="row">
                        <!-- Content Column -->
                        <div class="col-xl-12 my-4" style="text-align: center">
                            <div class="row">
                                {% if errors %}
                                {% for field in form %}
                                {% for error in field.errors %}
                                <div class="alert alert-danger">
                                    <strong>{{ field.name }} - {{ error|escape }}</strong>
                                </div>
                                {% endfor %}
                                {% endfor %}
                                {% for error in form.non_field_errors %}
                                <div class="alert alert-danger">
                                    <strong>{{ error|escape }}</strong>
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="form-group row" style="margin-top: 1rem; margin-left:30px">
                        <div class="row">
                            <div class="cell w-100">
                                <!-- Large title -->
                                <h1 style="font-size:40px">Apply For Scholarship<br><br></h1>
                            </div>
                        </div>
                    </div>
                    <div class="container" style="width:94% ;">
                        <p style="margin-bottom: 50px; color:#8c8a8ae3; font-size: 16px;display: inline;font-family: 'Open Sans', sans-serif !important;">
                            <b>General guidelines</b><br /><br />
                            1. For the application to be considered, the date for return to campus must be before Autumn semester starts (before 1st August 2023)<br />
                            2. A proof can be an official document or pdf of the mail from the professor/host institute<br />
                        <div class="row" style="margin-top: 50px;margin-bottom: 50px;">
                            <div class="col-md-6">
                                <label class="col-form-label" for="name"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Name
                                    of Applicant<span style="color:red;"> *</span></label>
                                <Input name="name" class="form-control"
                                    style="height:25px;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4; "
                                    placeholder="Name of the Student" required></Input>
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label" for="roll"
                                    style=" color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Roll
                                    No<span style="color:red;"> *</span></label>
                                <Input name="roll" class="form-control"
                                    style="height:25px; outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4;"
                                    Placeholder="Roll No." required></Input>
                            </div>
                        </div>
                    <!-- <div class="container" style="width:94% ;">
                        <p style="margin-bottom: 50px; color:#8c8a8ae3; font-size: 16px;display: inline;font-family: 'Open Sans', sans-serif !important;">
                            <b>General guidelines</b><br /><br />
                            1. If the Offer Letter does not mention the specific start and end date of the project 
                            or the financial help offered by the Host University, the mentioned details (project dates or financial help) 
                            must be accompanied by proof of the same.<br />
                            A proof can constitute:<br />
                            &emsp; i. Revised Offer Letter or an official document from the host University stating the details.<br />
                            &emsp; ii. Mail conversation with the host professor that mentions a confirmation of the details.<br />
                            2. The end date of the project must be well within 2nd August 2022. If the end date goes beyond this date, the student must:<br />
                            &emsp; i. Either produce a revised Offer Letter after negotiations with the Host University ensuring that the new end date follows the guidelines, or<br />
                            &emsp; ii. Produce a revised NoC from the respective authorities that states that the end date mentioned is acceptable.<br>
                            3. These additional documents must be mailed to <a href="mailto:ftp.ircell@gmail.com">ftp.ircell@gmail.com</a> without fail.</p>
                        <div class="row" style="margin-top: 50px;margin-bottom: 50px;">
                            <div class="col-md-6">
                                <label class="col-form-label" for="name"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Name
                                    of Applicant<span style="color:red;"> *</span></label>
                                <Input name="name" class="form-control"
                                    style="height:25px;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4; "
                                    placeholder="Name of the Student" required></Input>
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label" for="roll"
                                    style=" color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Roll
                                    No<span style="color:red;"> *</span></label>
                                <Input name="roll" class="form-control"
                                    style="height:25px; outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4;"
                                    Placeholder="Roll No." required></Input>
                            </div>
                        </div> -->
                        <div class="row" style="margin-bottom: 50px;">
                            <div class="col-md-6">
                                <label class="col-form-label" for="email"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Email<span
                                        style="color:red;"> *</span></label>
                                <Input name="email" class="form-control"
                                    style="height:25px;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4; "
                                    placeholder="Email Address" required></Input>
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label" for="cgpa"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">CGPA<span
                                        style="color:red;"> *</span></label>
                                <Input name="cgpa" class="form-control"
                                    style="height:25px;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4; "
                                    placeholder="cgpa" required></Input>
                            </div>
                        </div>

                        <div class="row" style="margin-top:50px">
                            <div class="col-md-6">
                                <label class="col-form-label" for="applying_to"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Applying To<span style="color:red;"> *</span></label>
                                <select class="form-select" name="applying_to">
                                    <option value="gkf" selected>GKF</option>
                                    <option value="iitkgf">IITKGPF</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label" for="yearOfStudy"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Year
                                    of Study<span style="color:red;"> *</span></label>
                                <select class="form-select" name="yearOfStudy">
                                    <option value="2nd" selected>2nd</option>
                                    <option value="3rd">3rd</option>
                                    <option value="4th">4th</option>
                                </select>
                            </div>
                        </div>

                        <div class="row" style="margin-top:50px">
                            <div class="col-md-6">
                                <label class="col-form-label" for="mode"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Internship Status<span style="color:red;"> *</span></label>
                                <select class="form-select" name="mode">
                                    <option value="optional" selected>Optional</option>
                                    <option value="mandatory">Mandatory</option>
                                </select>
                            </div>
                        </div>

                        <div class="row" style="margin-top: 0px;margin-bottom: 25px;margin-top: 50px;">
                            <div class="col-md-12">
                                <input type="checkbox" name="hasBacklog" id='hasBacklog'>
                                &nbsp;
                                <label class="col-form-label" for="hasBacklog"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">I have a Backlog</label>
                        
                            </div>
                        </div>

                        <div class="row" style="margin-top: 50px;">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-12">
                                        <label class="col-form-label" for="transcript"
                                            style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Transcript<span
                                                style="color:red;"> *</span></label>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 50px;">
                                    <div class="col-md-12">
                                        <input type="file" class="form-control-file" name="transcript" accept=".pdf" required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <!-- <div class="row">
                                    <div class="col-md-12">
                                        <label class="col-form-label" for="cv"
                                            style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Latest
                                            CV<span style="color:red;"> *</span></label>
                                    </div>
                                </div> -->
                                <div class="row">
                                    <div class="col-md-12">
                                        <label class="col-form-label" for="lor"
                                            style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">LOR<span style="color:red;"> *</span></label>
                                    </div>
                                </div>
                                <div class="row" style="margin-bottom: 50px;">
                                    <div class="col-md-12">
                                        <input type="file" class="form-control-file" name="lor" accept=".pdf" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" style="margin-bottom: 50px;">
                            <label class="col-form-label one" for="project_desc"
                                style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Project Description<span style="color:red;">
                                    *</span></label>
                            <span id="one" style="color:red;"> </span>
                            <textarea id="two1" name="project_desc" id="project_desc" class="form-control"
                                style="height:200px ;width:98%;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black; opacity:0.4;"
                                placeholder="Project Description" rows="10" required></textarea>
                        </div>

                        <!-- <div class="row" style="margin-bottom: 50px;">
                            <label class="col-form-label" for="type"
                                style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;    font-family: 'Open Sans', sans-serif !important;">Internship Status<span
                                    style="color:red;"> *</span></label>
                            <select class="form-select" name="type">
                                <option value="Optional" selected>Optional</option>
                                <option value="Mandatory">Mandatory</option>
                            </select>
                        </div> -->

                        <div class="row">
                            <div class="col-md-12">
                                <label class="col-form-label" for="offer_letter"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Offer Letter<span style="color:red;"> *</span></label>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 15px;">
                            <div class="col-md-12">
                                <input type="file" class="form-control-file" name="offer_letter" accept=".pdf" style="margin:2px;" required>
                            </div>
                        </div>
                        <p style="color:#8c8a8ae3; font-size: 16px;display: inline;font-family: 'Open Sans', sans-serif !important;">
                            The Offer Letter submitted must specify:<br />
                            &emsp; 1. The duration of the project, with the specific start and end date.<br />
                            &emsp; 2. The exact financial help provided by the Host University, if any.<br />
                            Along with all the basic information about the project (candidate name, Host University name, project description, etc.)
                        </p>
                        
                        <div class="row" style="margin-top: 50px;">
                            <div class="col-md-12">
                                <label class="col-form-label" for="noc"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">NoC
                                    from faculty advisor and HoD of Dept/School/Center approving application for
                                    the award funding.<span style="color:red;"> *</span></label>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 15px;">
                            <div class="col-md-12">
                                <input type="file" class="form-control-file" name="noc" required accept=".pdf" style="margin:2px;">
                            </div>
                        </div>
                        <p
                            style="margin-bottom: 50px; color:#8c8a8ae3; font-size: 16px;display: inline;font-family: 'Open Sans', sans-serif !important;">
                            The NOC given by the Head of Department and/or the Faculty Advisor must follow the given format : <a href="{% static 'NOC_2k23.pdf' %}" style="color:red; display: inline-block;margin-bottom:0; margin-top:0 ;font-family: 'Open Sans', sans-serif !important;" download>(NOC letter)</a> <br />
                            The NOC should also specify the duration of the project, with the specific start and end date that coincide with the dates mentioned in the Offer Letter.
                        </p>

                        <div class="row" style="margin-top:50px;margin-bottom: 50px;">
                            <div class="col-md-6">
                                <label class="col-form-label" for="DurationOfVisit_from_and_to"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px; font-family: 'Open Sans', sans-serif !important;">Duration
                                    of visit (from & to)<span style="color:red;"> *</span></label>
                            </div>
                            <div class="col-md-3">
                                <input style="margin-right:73px" type="date" name="durationOfVisit_from" class="form-control" required>
                            </div>
                        
                            <div class="col-md-3" id="one1">
                                <input style="margin-right:120px" type="date" name="durationOfVisit_to" class="form-control" required>
                            </div>
                        </div>

                        <div class="row" style="margin-bottom: 50px">
                            <label class="col-form-label" for="hostUniversity"
                                style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px; font-family: 'Open Sans', sans-serif !important;">Name
                                of Host University<span style="color:red;"> *</span></label>
                            <Input name="hostUniversity" class="form-control"
                                style="height:25px;outline: 0; border-width: 0 0 1px;border-radius: 0 0 0 0;border-color: black ; opacity:0.4;"
                                placeholder="Name of the Host University" required></Input>
                        </div>

                        <div class="row" style="margin-top: 0px;margin-bottom: 25px;">
                            <div class="col-md-12">
                                <input type="checkbox" name="previously_funded" id='previously_funded'>
                                &nbsp;
                                <label class="col-form-label" for="previously_funded"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Have recieved financial assistance from host university.</label>
                        
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <label class="col-form-label" for="funding_proof"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">List
                                    all financial assistance received (if any, upload a merged pdf)</label>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 50px;">
                            <div class="col-md-12">
                                <input type="file" class="form-control-file" name="funding_proof" accept=".pdf" style="margin:2px;">
                            </div>
                        </div>

                        <!-- <div class="row">
                            <div class="col-md-12">
                                <label class="col-form-label" for="self_declaration"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline-block;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">Self Declaration<span style="color:red;"> *</span></label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <input type="file" class="form-control-file" name="self_declaration" accept=".pdf" style="margin:2px;" required>
                            </div>
                            <p
                            style="margin-bottom: 50px; color:#8c8a8ae3; font-size: 16px;display: inline; margin-top:10px;font-family: 'Open Sans', sans-serif !important;">
                            Self Declaration must be in the given format : <a href="{% static 'SelfDeclaration-GKF.pdf' %}" style="color:red; display: inline-block;margin-bottom:0; margin-top:0; font-family: 'Open Sans', sans-serif !important;" download>(Self Declaration)</a>
                        </p>
                        </div> -->

                        <div class="row" style="margin-top: 0px;margin-bottom: 25px;">
                            <div class="col-md-12">
                                <input type="checkbox" name="declaration" id='check1' value='2' required>
                                &nbsp;
                                <label class="col-form-label" for="declaration1"
                                    style="color:#8c8a8ae3 ; font-weight: bold; font-size: 16px;display: inline;margin-bottom:10px;font-family: 'Open Sans', sans-serif !important;">
                                    I hereby declare that the information given in this application is true
                                    and correct. Any deviation from the stated facts can lead to the
                                    cancellation of my application<span style="color:red;"> *</span></label>

                            </div>
                        </div>

                        <!-- Modal footer -->
                        <center style=" margin-bottom:50px">
                            <button type="submit" class="btn btn-success applybutton formsub"
                                style="width: 100px;height: 40px;font-size:20px" id='btn'>Apply</button>
                            <button type="button" class="btn btn-danger"
                                style="width: 100px;height: 40px;font-size:20px"
                                onclick="location.href='{% url 'ftp:scholarships' %}'">Close</button>
                        </center>

                            {% comment %}
                            <a href="{% url 'ftp:export_gkf' %}" class="btn btn-info" style="vertical-align: middle !important; flex:1.2;">Export All Applicants</a>
                            {% endcomment %}
                            
                            <input style="display:none;" id="col1" name="col1">
                </form>
            </div>

    </section>
</main>
{% endblock %}

{% block js %}
<script>
    var id = window.location.pathname;
    pid = id.slice(24, -1);
    document.getElementById('col1').value = pid;

    function validateForm(e) {
        e.preventDefault()
        var form = document.forms["myForm"];
        str = form.action;
        str = str.slice(0, -1) + pid.toString() + '/';
        console.log(str)
        form.action = str;

        var date1 = document.forms["myForm"]["durationOfVisit_from"].value
        var date2 = document.forms["myForm"]["durationOfVisit_to"].value
        console.log(date1);
        console.log(date2);
        var d = new Date;
        var day = d.getDate();
        if (day > 9) {
            day = day.toString();
        }
        else {
            day = '0' + day.toString();
        }
        var currentMonth = d.getMonth() + 1;
        if (currentMonth > 9) {
            currentMonth = currentMonth.toString();
        }
        else {
            currentMonth = '0' + currentMonth.toString();
        }

        var currentyear = d.getFullYear().toString();

        var date = currentyear + '-' + currentMonth + '-' + day;
        if (date > date1) {
            alert("Invalid Date")
            document.forms["myForm"]["hostUniversity"].scrollIntoView();
            return false
        }


        if (date2 < date1) {
            alert("Invalid Date")
            document.forms["myForm"]["hostUniversity"].scrollIntoView();
            return false
        }

        var textbox1 = document.forms["myForm"]["project_desc"].value;
        console.log(textbox1)
        if (textbox1.match(/(\w+)/g) == null) {
            var textbox1_count = 0;
        }
        else {
            var textbox1_count = textbox1.match(/(\w+)/g).length
        }

        var flag = 0;
        if (textbox1_count < 250) {
            document.getElementById("one").innerHTML = "**Words less then 250";
            document.getElementById("one1").scrollIntoView();
            alert('Details Of The Proposed Research or professional Internship is less than 250 words');
            return false;
        } else {
            document.getElementById("one").innerHTML = "";
            flag += 1;
        }
        if (flag == 1) {
            document.forms["myForm"].submit();
            return true;
        } else return false;
    }

</script>
{% endblock %}